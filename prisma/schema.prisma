generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  id    Int    @id @default(autoincrement())
  name  String
  logo  String
  ipos  IPO[]
}

model IPO {
  id                  Int       @id @default(autoincrement())
  companyId           Int
  priceBand           String
  openDate            DateTime
  closeDate           DateTime
  issueSize           String
  issueType           String
  listingDate         DateTime
  status              IPOStatus
  ipoPrice            Float
  listingPrice        Float?    // nullable
  listingGain         Float?    // nullable
  currentMarketPrice  Float?    // nullable
  currentReturn       Float?    // nullable
  createdAt           DateTime  @default(now())

  company   Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)
  documents Document[]
}


model Document {
  id      Int    @id @default(autoincrement())
  ipoId   Int
  rhpPdf  String
  drhpPdf String

  ipo     IPO    @relation(fields: [ipoId], references: [id], onDelete: Cascade)
}

enum IPOStatus {
  UPCOMING
  OPEN
  CLOSED
  LISTED
}
